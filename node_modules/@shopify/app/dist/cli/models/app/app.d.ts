import { AppErrors } from './loader.js';
import { ExtensionInstance } from '../extensions/extension-instance.js';
import { zod } from '@shopify/cli-kit/node/schema';
import { DotEnvFile } from '@shopify/cli-kit/node/dot-env';
import { PackageManager } from '@shopify/cli-kit/node/node-package-manager';
export declare const AppConfigurationSchema: zod.ZodObject<{
    extension_directories: zod.ZodOptional<zod.ZodArray<zod.ZodString, "many">>;
    web_directories: zod.ZodOptional<zod.ZodArray<zod.ZodString, "many">>;
    name: zod.ZodOptional<zod.ZodString>;
    client_id: zod.ZodOptional<zod.ZodString>;
    scopes: zod.ZodDefault<zod.ZodString>;
    application_url: zod.ZodOptional<zod.ZodString>;
    redirect_url_allowlist: zod.ZodOptional<zod.ZodArray<zod.ZodString, "many">>;
    requested_access_scopes: zod.ZodOptional<zod.ZodArray<zod.ZodString, "many">>;
}, "strip", zod.ZodTypeAny, {
    scopes: string;
    extension_directories?: string[] | undefined;
    web_directories?: string[] | undefined;
    name?: string | undefined;
    client_id?: string | undefined;
    application_url?: string | undefined;
    redirect_url_allowlist?: string[] | undefined;
    requested_access_scopes?: string[] | undefined;
}, {
    extension_directories?: string[] | undefined;
    web_directories?: string[] | undefined;
    name?: string | undefined;
    client_id?: string | undefined;
    scopes?: string | undefined;
    application_url?: string | undefined;
    redirect_url_allowlist?: string[] | undefined;
    requested_access_scopes?: string[] | undefined;
}>;
export declare enum WebType {
    Frontend = "frontend",
    Backend = "backend",
    Background = "background"
}
export declare const WebConfigurationSchema: zod.ZodUnion<[zod.ZodObject<{
    name: zod.ZodOptional<zod.ZodString>;
    auth_callback_path: zod.ZodOptional<zod.ZodUnion<[zod.ZodEffects<zod.ZodString, string, unknown>, zod.ZodArray<zod.ZodEffects<zod.ZodString, string, unknown>, "many">]>>;
    webhooks_path: zod.ZodOptional<zod.ZodEffects<zod.ZodString, string, unknown>>;
    port: zod.ZodOptional<zod.ZodNumber>;
    commands: zod.ZodObject<{
        build: zod.ZodOptional<zod.ZodString>;
        dev: zod.ZodString;
    }, "strip", zod.ZodTypeAny, {
        dev: string;
        build?: string | undefined;
    }, {
        dev: string;
        build?: string | undefined;
    }>;
    roles: zod.ZodArray<zod.ZodDefault<zod.ZodEnum<[WebType.Frontend, WebType.Backend, WebType.Background]>>, "many">;
}, "strip", zod.ZodTypeAny, {
    commands: {
        dev: string;
        build?: string | undefined;
    };
    roles: WebType[];
    name?: string | undefined;
    auth_callback_path?: string | string[] | undefined;
    webhooks_path?: string | undefined;
    port?: number | undefined;
}, {
    commands: {
        dev: string;
        build?: string | undefined;
    };
    roles: (WebType | undefined)[];
    name?: string | undefined;
    auth_callback_path?: unknown;
    webhooks_path?: unknown;
    port?: number | undefined;
}>, zod.ZodObject<{
    name: zod.ZodOptional<zod.ZodString>;
    auth_callback_path: zod.ZodOptional<zod.ZodUnion<[zod.ZodEffects<zod.ZodString, string, unknown>, zod.ZodArray<zod.ZodEffects<zod.ZodString, string, unknown>, "many">]>>;
    webhooks_path: zod.ZodOptional<zod.ZodEffects<zod.ZodString, string, unknown>>;
    port: zod.ZodOptional<zod.ZodNumber>;
    commands: zod.ZodObject<{
        build: zod.ZodOptional<zod.ZodString>;
        dev: zod.ZodString;
    }, "strip", zod.ZodTypeAny, {
        dev: string;
        build?: string | undefined;
    }, {
        dev: string;
        build?: string | undefined;
    }>;
    type: zod.ZodDefault<zod.ZodEnum<[WebType.Frontend, WebType.Backend, WebType.Background]>>;
}, "strip", zod.ZodTypeAny, {
    type: WebType;
    commands: {
        dev: string;
        build?: string | undefined;
    };
    name?: string | undefined;
    auth_callback_path?: string | string[] | undefined;
    webhooks_path?: string | undefined;
    port?: number | undefined;
}, {
    commands: {
        dev: string;
        build?: string | undefined;
    };
    name?: string | undefined;
    auth_callback_path?: unknown;
    webhooks_path?: unknown;
    port?: number | undefined;
    type?: WebType | undefined;
}>]>;
export declare const ProcessedWebConfigurationSchema: zod.ZodObject<{
    name: zod.ZodOptional<zod.ZodString>;
    auth_callback_path: zod.ZodOptional<zod.ZodUnion<[zod.ZodEffects<zod.ZodString, string, unknown>, zod.ZodArray<zod.ZodEffects<zod.ZodString, string, unknown>, "many">]>>;
    webhooks_path: zod.ZodOptional<zod.ZodEffects<zod.ZodString, string, unknown>>;
    port: zod.ZodOptional<zod.ZodNumber>;
    commands: zod.ZodObject<{
        build: zod.ZodOptional<zod.ZodString>;
        dev: zod.ZodString;
    }, "strip", zod.ZodTypeAny, {
        dev: string;
        build?: string | undefined;
    }, {
        dev: string;
        build?: string | undefined;
    }>;
    roles: zod.ZodArray<zod.ZodDefault<zod.ZodEnum<[WebType.Frontend, WebType.Backend, WebType.Background]>>, "many">;
}, "strip", zod.ZodTypeAny, {
    commands: {
        dev: string;
        build?: string | undefined;
    };
    roles: WebType[];
    name?: string | undefined;
    auth_callback_path?: string | string[] | undefined;
    webhooks_path?: string | undefined;
    port?: number | undefined;
}, {
    commands: {
        dev: string;
        build?: string | undefined;
    };
    roles: (WebType | undefined)[];
    name?: string | undefined;
    auth_callback_path?: unknown;
    webhooks_path?: unknown;
    port?: number | undefined;
}>;
export type AppConfiguration = zod.infer<typeof AppConfigurationSchema>;
export type WebConfiguration = zod.infer<typeof WebConfigurationSchema>;
export type ProcessedWebConfiguration = zod.infer<typeof ProcessedWebConfigurationSchema>;
export type WebConfigurationCommands = keyof WebConfiguration['commands'];
export interface Web {
    directory: string;
    configuration: ProcessedWebConfiguration;
    framework?: string;
}
export interface AppInterface {
    name: string;
    idEnvironmentVariableName: string;
    directory: string;
    packageManager: PackageManager;
    configuration: AppConfiguration;
    configurationPath: string;
    nodeDependencies: {
        [key: string]: string;
    };
    webs: Web[];
    usesWorkspaces: boolean;
    dotenv?: DotEnvFile;
    allExtensions: ExtensionInstance[];
    errors?: AppErrors;
    hasExtensions: () => boolean;
    updateDependencies: () => Promise<void>;
    extensionsForType: (spec: {
        identifier: string;
        externalIdentifier: string;
    }) => ExtensionInstance[];
}
export declare class App implements AppInterface {
    name: string;
    idEnvironmentVariableName: string;
    directory: string;
    packageManager: PackageManager;
    configuration: AppConfiguration;
    configurationPath: string;
    nodeDependencies: {
        [key: string]: string;
    };
    webs: Web[];
    usesWorkspaces: boolean;
    dotenv?: DotEnvFile;
    errors?: AppErrors;
    allExtensions: ExtensionInstance[];
    constructor(name: string, idEnvironmentVariableName: string, directory: string, packageManager: PackageManager, configuration: AppConfiguration, configurationPath: string, nodeDependencies: {
        [key: string]: string;
    }, webs: Web[], extensions: ExtensionInstance[], usesWorkspaces: boolean, dotenv?: DotEnvFile, errors?: AppErrors);
    updateDependencies(): Promise<void>;
    hasExtensions(): boolean;
    extensionsForType(specification: {
        identifier: string;
        externalIdentifier: string;
    }): ExtensionInstance[];
}
type RendererVersionResult = {
    name: string;
    version: string;
} | undefined | 'not_found';
/**
 * Given a UI extension and the app it belongs to, it returns the version of the renderer package.
 * Looks for `/node_modules/@shopify/{renderer-package-name}/package.json` to find the real version used.
 * @param uiExtensionType - UI extension whose renderer version will be obtained.
 * @param app - App object containing the extension.
 * @returns The version if the dependency exists.
 */
export declare function getUIExtensionRendererVersion(extension: ExtensionInstance, app: AppInterface): Promise<RendererVersionResult>;
export declare function getDependencyVersion(dependency: string, directory: string): Promise<RendererVersionResult>;
export {};
