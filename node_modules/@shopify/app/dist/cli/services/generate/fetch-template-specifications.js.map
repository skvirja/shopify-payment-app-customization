{"version":3,"file":"fetch-template-specifications.js","sourceRoot":"","sources":["../../../../src/cli/services/generate/fetch-template-specifications.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,iCAAiC,GAElC,MAAM,8CAA8C,CAAA;AAErD,OAAO,cAAc,MAAM,sDAAsD,CAAA;AACjF,OAAO,6BAA6B,MAAM,oEAAoE,CAAA;AAC9G,OAAO,mBAAmB,MAAM,mEAAmE,CAAA;AACnG,OAAO,2BAA2B,MAAM,4EAA4E,CAAA;AACpH,OAAO,mBAAmB,MAAM,uCAAuC,CAAA;AACvE,OAAO,oBAAoB,MAAM,wCAAwC,CAAA;AACzE,OAAO,cAAc,MAAM,8DAA8D,CAAA;AACzF,OAAO,8BAA8B,MAAM,kEAAkE,CAAA;AAC7G,OAAO,yBAAyB,MAAM,6DAA6D,CAAA;AACnG,OAAO,WAAW,MAAM,0DAA0D,CAAA;AAClF,OAAO,mBAAmB,MAAM,iEAAiE,CAAA;AACjG,OAAO,EAAC,eAAe,EAAC,MAAM,oCAAoC,CAAA;AAElE,MAAM,CAAC,KAAK,UAAU,uBAAuB,CAC3C,KAAa,EACb,MAAc,EACd,uBAAiC;IAEjC,MAAM,eAAe,GAA4C,MAAM,eAAe,CACpF,iCAAiC,EACjC,KAAK,EACL,EAAC,MAAM,EAAC,CACT,CAAA;IACD,MAAM,YAAY,GAAG,eAAe,CAAC,sBAAsB,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC,CAAA;IAC7F,OAAO,YAAY,CAAC,MAAM,CACxB,CAAC,QAAQ,EAAE,EAAE,CACX,uBAAuB,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC;QACrD,uBAAuB,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAE,CAAC,IAAI,CAAC,CAC5D,CAAA;AACH,CAAC;AAED,MAAM,UAAU,uBAAuB;IACrC,OAAO;QACL,cAAc;QACd,6BAA6B;QAC7B,mBAAmB;QACnB,2BAA2B;QAC3B,cAAc;QACd,8BAA8B;QAC9B,yBAAyB;QACzB,WAAW;QACX,mBAAmB;QACnB,oBAAoB;QACpB,mBAAmB;KACpB,CAAA;AACH,CAAC","sourcesContent":["import {\n  RemoteTemplateSpecificationsQuery,\n  RemoteTemplateSpecificationsQuerySchema,\n} from '../../api/graphql/template_specifications.js'\nimport {ExtensionTemplate} from '../../models/app/template.js'\nimport themeExtension from '../../models/templates/theme-specifications/theme.js'\nimport checkoutPostPurchaseExtension from '../../models/templates/ui-specifications/checkout_post_purchase.js'\nimport checkoutUIExtension from '../../models/templates/ui-specifications/checkout_ui_extension.js'\nimport customerAccountsUIExtension from '../../models/templates/ui-specifications/customer_accounts_ui_extension.js'\nimport flowActionExtension from '../../models/templates/flow_action.js'\nimport flowTriggerExtension from '../../models/templates/flow_trigger.js'\nimport posUIExtension from '../../models/templates/ui-specifications/pos_ui_extension.js'\nimport productSubscriptionUIExtension from '../../models/templates/ui-specifications/product_subscription.js'\nimport taxCalculationUIExtension from '../../models/templates/ui-specifications/tax_calculation.js'\nimport UIExtension from '../../models/templates/ui-specifications/ui_extension.js'\nimport webPixelUIExtension from '../../models/templates/ui-specifications/web_pixel_extension.js'\nimport {partnersRequest} from '@shopify/cli-kit/node/api/partners'\n\nexport async function fetchExtensionTemplates(\n  token: string,\n  apiKey: string,\n  availableSpecifications: string[],\n): Promise<ExtensionTemplate[]> {\n  const remoteTemplates: RemoteTemplateSpecificationsQuerySchema = await partnersRequest(\n    RemoteTemplateSpecificationsQuery,\n    token,\n    {apiKey},\n  )\n  const allTemplates = remoteTemplates.templateSpecifications.concat(localExtensionTemplates())\n  return allTemplates.filter(\n    (template) =>\n      availableSpecifications.includes(template.identifier) ||\n      availableSpecifications.includes(template.types[0]!.type),\n  )\n}\n\nexport function localExtensionTemplates(): ExtensionTemplate[] {\n  return [\n    themeExtension,\n    checkoutPostPurchaseExtension,\n    checkoutUIExtension,\n    customerAccountsUIExtension,\n    posUIExtension,\n    productSubscriptionUIExtension,\n    taxCalculationUIExtension,\n    UIExtension,\n    webPixelUIExtension,\n    flowTriggerExtension,\n    flowActionExtension,\n  ]\n}\n"]}